<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ† Ø¢Ù†Ù„Ø§ÛŒÙ† Ù…Ù†</title>
    <style>
        body { background: #000; color: #fff; margin: 0; font-family: Tahoma, sans-serif; overflow: hidden; text-align: center; }
        
        /* Ù¾Ø±Ø¯Ù‡ ÙˆØ±ÙˆØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø§Ø²Ù‡ Ù¾Ø®Ø´ */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 100;
        }

        .play-btn {
            padding: 20px 50px; background: #e50914; color: #fff;
            border: none; border-radius: 50px; font-size: 24px;
            font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        .play-btn:hover { background: #ff0a16; transform: scale(1.1); }

        #player-container { width: 100vw; height: 100vh; }
        video { width: 100%; height: 100%; background: #000; }
        
        #info { position: absolute; bottom: 20px; width: 100%; text-shadow: 2px 2px 4px #000; color: #ccc; font-size: 14px; }
    </style>
</head>
<body>

    <div id="start-screen">
        <h1 style="margin-bottom: 30px;">Ø¨Ù‡ Ø´Ø¨Ú©Ù‡ ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ†ÛŒ Ù…Ù† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</h1>
        <button class="play-btn" onclick="startBroadcast()">ðŸ”´ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ø®Ø´ Ø²Ù†Ø¯Ù‡</button>
        <p style="color: #888; margin-top: 20px;">(Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ ØµØ¯Ø§ Ùˆ ØªØµÙˆÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯)</p>
    </div>

    <div id="player-container">
        <video id="tvPlayer" playsinline></video>
    </div>

    <div id="info" id="statusText">Ø¯Ø± Ø­Ø§Ù„ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø²Ù…Ø§Ù† Ù¾Ø®Ø´...</div>

    <script>
        // Û±. Ù„ÛŒØ³Øª ÙÛŒÙ„Ù…â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§
        const playlist = [
            { 
                url: 'https://www.w3schools.com/html/mov_bbb.mp4', 
                duration: 596, 
                title: 'ÙÛŒÙ„Ù… ØªØ³ØªÛŒ Ú¯ÙˆÚ¯Ù„' 
            }
            // Ø§ÛŒÙ†Ø¬Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ÙÛŒÙ„Ù…â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ØªØ§Ù† (Ù…Ø«Ù„ Ù„ÛŒÙ†Ú© ÙÛŒÙ„Ù…Ø¬Ùˆ) Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
        ];

        // Û². Ø²Ù…Ø§Ù† Ù…Ø¨Ø¯Ø§ (Ø«Ø§Ø¨Øª Ø¨Ù…Ø§Ù†Ø¯)
        const epochStart = new Date('2024-01-01T00:00:00').getTime() / 1000;

        const player = document.getElementById('tvPlayer');
        const startScreen = document.getElementById('start-screen');
        const info = document.getElementById('info');

        function syncTV() {
            const now = Date.now() / 1000;
            const totalDuration = playlist.reduce((a, b) => a + b.duration, 0);
            let elapsed = (now - epochStart) % totalDuration;

            let accumulated = 0;
            for (let movie of playlist) {
                if (elapsed < accumulated + movie.duration) {
                    const seekTime = elapsed - accumulated;
                    
                    if (player.src !== movie.url) {
                        player.src = movie.url;
                        player.load(); // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙÛŒÙ„Ù… Ø¬Ø¯ÛŒØ¯
                    }
                    
                    player.currentTime = seekTime;
                    info.innerText = Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´: ${movie.title};
                    break;
                }
                accumulated += movie.duration;
            }
        }

        function startBroadcast() {
            startScreen.style.display = 'none'; // Ø­Ø°Ù ØµÙØ­Ù‡ Ø´Ø±ÙˆØ¹
            syncTV(); // Ù‡Ù…Ø§Ù‡Ù†Ú¯â€ŒØ³Ø§Ø²ÛŒ Ø²Ù…Ø§Ù†
            player.play().catch(error => {
                alert("Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø®Ø´: " + error.message);
            });

            // Ù‡Ø± Û±Û° Ø«Ø§Ù†ÛŒÙ‡ ÛŒÚ©Ø¨Ø§Ø± Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ø±Ø§ Ú†Ú© Ú©Ù†
            setInterval(syncTV, 10000);
        }
    </script>
</body>
</html>
