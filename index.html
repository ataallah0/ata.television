<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ† Ø¢Ù†Ù„Ø§ÛŒÙ† Ù…Ù†</title>
    <style>
        body { background: #000; color: #fff; margin: 0; font-family: Tahoma, sans-serif; overflow: hidden; text-align: center; }
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 100;
        }
        .play-btn {
            padding: 20px 50px; background: #e50914; color: #fff;
            border: none; border-radius: 50px; font-size: 24px;
            font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        .play-btn:hover { background: #ff0a16; transform: scale(1.1); }
        #player-container { width: 100vw; height: 100vh; }
        video { width: 100%; height: 100%; background: #000; }
        #info { position: absolute; bottom: 20px; width: 100%; text-shadow: 2px 2px 4px #000; color: #ccc; font-size: 14px; }
    </style>
</head>
<body>

    <div id="start-screen">
        <h1 style="margin-bottom: 30px;">Ø¨Ù‡ Ø´Ø¨Ú©Ù‡ ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ†ÛŒ Ø¹Ø·Ø§Ø§Ù„Ù„Ù‡  Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</h1>
        <button class="play-btn" onclick="startBroadcast()">ðŸ”´ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ø®Ø´ Ø²Ù†Ø¯Ù‡</button>
        <p style="color: #888; margin-top: 20px;">(Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ ØµØ¯Ø§ Ùˆ ØªØµÙˆÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯)</p>
    </div>

    <div id="player-container">
        <video id="tvPlayer" playsinline></video>
    </div>

    <div id="info">Ø¯Ø± Ø­Ø§Ù„ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø²Ù…Ø§Ù† Ù¾Ø®Ø´...</div>

    <script>
        const playlist = [
            { 
                url: 'https://caspian13.cdn.asset.aparat.com/aparat-video/a3c5d4bee6719d61268a29285cd6829059117243-360p.mp4?wmsAuthSign=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbiI6ImRjN2NjNDE0MzM3YWI0N2Q0ZjMwNWVkNzhmZmI1NTM0IiwiZXhwIjoxNzY2ODgzNDIzLCJpc3MiOiJTYWJhIElkZWEgR1NJRyJ9.WBa5Uwdop2e80-Z8hA1Vtzvp-OQv9cDIiMfNjCY11ns', 
                duration: 10000, 
                title: 'ÙÛŒÙ„Ù… ØªØ³ØªÛŒ' 
            }
        ];

        const epochStart = new Date('2024-01-01T00:00:00').getTime() / 1000;
        const player = document.getElementById('tvPlayer');
        const startScreen = document.getElementById('start-screen');
        const info = document.getElementById('info');

        function syncTV() {
            const now = Date.now() / 1000;
            const totalDuration = playlist.reduce((a, b) => a + b.duration, 0);
            let elapsed = (now - epochStart) % totalDuration;

            let accumulated = 0;
            for (let movie of playlist) {
                if (elapsed < accumulated + movie.duration) {
                    const seekTime = elapsed - accumulated;
                    
                    if (player.src !== movie.url) {
                        player.src = movie.url;
                    }
                    
                    player.currentTime = seekTime;
                    // Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ Ø¯Ø± Ø®Ø· Ù¾Ø§ÛŒÛŒÙ†:
                    info.innerText = "Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´: " + movie.title;
                    break;
                }
                accumulated += movie.duration;
            }
        }

        function startBroadcast() {
            startScreen.style.display = 'none';
            syncTV();
            player.play().catch(error => {
                console.error("Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø®Ø´:", error);
                alert("Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø¬Ø§Ø²Ù‡ Ù¾Ø®Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± Ù†Ø¯Ø§Ø¯. Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.");
            });

            setInterval(syncTV, 10000);
        }
    </script>
</body>
</html>
